# 东南大学真实数据导入使用说明

## 概述
本文档说明如何将准备好的东南大学真实数据导入到系统数据库中，替换现有的测试数据。

## 数据文件说明

### 主要文件
- **`seu_real_data.sql`**: 包含所有三个模块的真实数据
- **`东南大学真实数据准备.md`**: 数据来源和结构说明文档

### 数据覆盖范围
1. **学校信息模块 (sch_*)**: 完整的东南大学信息、院系、专业、学科实力数据
2. **研究生择导模块 (grad_*)**: 计算机相关学院的导师和研究方向数据
3. **高考模拟填报模块**: 东南大学专业招生计划和录取统计数据

## 数据导入步骤

### 方法一：直接执行SQL文件（推荐）

1. **备份现有数据**（可选）
   ```sql
   -- 如需备份，可先导出现有数据
   mysqldump -u username -p database_name > backup_$(date +%Y%m%d).sql
   ```

2. **执行数据导入**
   ```bash
   # 在项目根目录执行
   mysql -u username -p database_name < src/main/resources/seu_real_data.sql
   ```

3. **验证数据导入**
   ```sql
   -- 检查学校信息
   SELECT * FROM sch_university WHERE id = 1;
   
   -- 检查导师数量
   SELECT COUNT(*) FROM grad_mentor WHERE university_id = 1;
   
   -- 检查专业数量
   SELECT COUNT(*) FROM major;
   ```

### 方法二：通过Spring Boot应用导入

1. **配置数据源**
   确保 `application.yml` 中数据库配置正确：
   ```yaml
   spring:
     datasource:
       url: jdbc:mysql://localhost:3306/your_database
       username: your_username
       password: your_password
     sql:
       init:
         mode: always
         data-locations: classpath:seu_real_data.sql
   ```

2. **启动应用**
   ```bash
   mvn spring-boot:run
   ```

## 数据验证检查

### 1. 学校信息模块验证
```sql
-- 验证东南大学基本信息
SELECT name, alias, level, province, city, founded_year 
FROM sch_university WHERE id = 1;

-- 验证院系数量（应该有28个主要院系）
SELECT COUNT(*) as department_count 
FROM sch_department WHERE university_id = 1;

-- 验证专业数量（应该有20个主要专业）
SELECT COUNT(*) as major_count 
FROM sch_major;

-- 验证学科实力数据
SELECT d.name, s.rank_grade, s.source, s.year 
FROM sch_univ_discipline_strength s 
JOIN sch_discipline d ON s.discipline_id = d.id 
WHERE s.university_id = 1 AND s.rank_grade IN ('A+', 'A', 'A-');
```

### 2. 研究生择导模块验证
```sql
-- 验证导师数量（应该有14位导师）
SELECT COUNT(*) as mentor_count 
FROM grad_mentor WHERE university_id = 1;

-- 验证研究方向（应该有20个方向）
SELECT COUNT(*) as direction_count 
FROM grad_research_direction WHERE id BETWEEN 101 AND 120;

-- 验证导师分布
SELECT d.name as department, COUNT(m.id) as mentor_count
FROM grad_department d 
LEFT JOIN grad_mentor m ON d.id = m.department_id 
WHERE d.university_id = 1 
GROUP BY d.id, d.name;

-- 验证2025年招生名额
SELECT SUM(total_slots) as total_slots, COUNT(*) as mentor_count
FROM grad_mentor_quota WHERE year = 2025;
```

### 3. 高考模拟填报模块验证
```sql
-- 验证专业数量（应该有30个专业）
SELECT COUNT(*) as major_count FROM major;

-- 验证2024年招生计划
SELECT subject_type, COUNT(*) as plan_count, SUM(plan_count) as total_students
FROM university_major_plan 
WHERE university_id = 1 AND year = 2024 
GROUP BY subject_type;

-- 验证录取统计数据
SELECT subject_type, COUNT(*) as stat_count, 
       MIN(min_score) as min_score, MAX(min_score) as max_score
FROM university_major_stat 
WHERE university_id = 1 AND year = 2024 
GROUP BY subject_type;

-- 验证分数排名映射
SELECT subject_type, COUNT(*) as mapping_count
FROM rank_mapping 
WHERE province = '江苏' AND year = 2024 
GROUP BY subject_type;
```

## 预期验证结果

### 数据量统计
- **sch_university**: 1条记录（东南大学）
- **sch_department**: 28条记录（主要院系）
- **sch_major**: 20条记录（主要专业）
- **sch_discipline**: 20条记录（学科分类）
- **grad_mentor**: 14条记录（导师信息）
- **grad_research_direction**: 20条记录（研究方向）
- **major**: 30条记录（高考专业）
- **university_major_plan**: 约50条记录（2024年招生计划）
- **university_major_stat**: 约50条记录（2024年录取统计）

### 关键数据点
- 东南大学成立于1902年
- 985、211、双一流A类高校
- 5个A+学科：建筑学、土木工程、交通运输工程、生物医学工程、电气工程
- 计算机科学与技术为A-学科
- 14位计算机相关导师，涵盖4个学院
- 2025年研究生招生名额总计约40个

## 常见问题解决

### 1. 外键约束错误
如果遇到外键约束错误，可以临时禁用：
```sql
SET FOREIGN_KEY_CHECKS = 0;
-- 执行导入操作
SET FOREIGN_KEY_CHECKS = 1;
```

### 2. 重复数据错误
SQL文件已包含清理语句，如果仍有问题，可手动清理：
```sql
-- 清理所有相关数据
DELETE FROM sch_tag_map WHERE target_id = 1;
DELETE FROM sch_admission_brochure WHERE university_id = 1;
-- ... 其他清理语句
```

### 3. 字符编码问题
确保数据库和连接使用UTF-8编码：
```sql
ALTER DATABASE your_database CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

## 数据更新维护

### 定期更新建议
1. **每年更新**: 招生计划、录取统计、导师招生名额
2. **每学期更新**: 导师信息、研究方向
3. **不定期更新**: 学科评估结果、院系调整

### 数据来源
- 东南大学官方网站: https://www.seu.edu.cn
- 各学院官方网站
- 教育部学科评估结果
- 江苏省教育考试院数据

## 注意事项

1. **数据真实性**: 所有数据基于公开信息整理，但可能存在时效性问题
2. **隐私保护**: 导师联系方式等敏感信息已做适当处理
3. **数据完整性**: 部分详细数据需要进一步收集完善
4. **版权声明**: 数据仅供学习和开发使用，不得用于商业用途

## 技术支持

如遇到数据导入问题，请检查：
1. 数据库连接配置
2. 表结构是否与schema.sql一致
3. 数据库用户权限
4. 字符编码设置

---

**最后更新**: 2025-09-28  
**数据版本**: v1.0  
**适用系统**: 高考志愿填报系统 v1.0
